<!DOCTYPE html>
<html>

<head>
    <link rel='stylesheet' href='stylesheets/prototype.typography.css' />
    <link rel='stylesheet' href='stylesheets/prototype.reset.css' />
    <script type='text/javascript' src='libs/jquery-2.0.3.min.js'></script>
</head>

<body style="background:#000;">

    <textarea id="raw" style="position:absolute;left:0;width:48%;bottom:15%;top:0%;font-family:Monaco;background:#000;color:#FFF;font-size:11px;line-height:15px;padding:0% 1%;padding-bottom:15%;padding-top:1%;background:#222;">
#include "stdafx.h"
#include "../../Include/A2DAbstract.h"

A2DAbstract::A2DAbstract(){}

A2DAbstract::~A2DAbstract(){}

LPCWSTR A2DAbstract::GetClass()
{
    return L"A2DAbstract";
}

LPCWSTR A2DAbstract::ToString()
{
    return L"A2DAbstract";
}

bool A2DAbstract::operator==(A2DAbstract * xAbstract)
{
    return this == xAbstract;
}
    </textarea>
    <textarea id="formatted" style="position:absolute;right:0;width:48%;bottom:15%;padding-bottom:15%;top:0;font-family:Monaco;background:#000;color:#FFF;font-size:11px;line-height:15px;padding:0% 1%;padding-bottom:15%;padding-top:1%;background:#000;">Click convert!</textarea>
    <button id="cool" style="position:absolute;bottom:0;left:0;right:0;height:15%;bottom:0;">Convert!</button>


</body>

<script>

    /* Coded by Mathew Kurian */

    Array.prototype.nextIndexOfNotChar = function (i, char) {
        while (this[i] == char) {
            i++;
        }

        return i;
    };

    /* Coded by Mathew Kurian */

    String.prototype.nextIndexOfNotChar = function (i, char) {

        var array = this.split('');

        while (array[i] == char) {
            i++;
        }

        return i;
    };

    /* Coded by Mathew Kurian */

    String.prototype.powerTrim = function () {
        var inDoubleQuotes = false,
            temp,
            s = this.split('');

        for (var i = 0; i < s.length; i++) {
            if (s[i] == "\"" && !inDoubleQuotes)
                inDoubleQuotes = true;
            else if (s[i] == "\"" && inDoubleQuotes)
                inDoubleQuotes = false;
            else if (s[i] == ' ' && !inDoubleQuotes)
                s.splice(i, (temp = s.nextIndexOfNotChar(i, ' ')) - i - 1);

        }

        return s.join('');

    };

    /* Coded by Mathew Kurian */

    Array.prototype.isNextNonWhiteSpaceChar = function (i, char) {
        if (this[i] == char)
            return true;

        while (this[i] == ' ' || this[i] == '\t' || this[i] == '\n')
            if (this[++i] == char)
                return true;

        return false;
    };

     /* Coded by Mathew Kurian */

    $("#cool").click("on", function () {
        var raw = $("#raw").val();

        raw = raw.replace(/\\/g, "\\\\ ")
                 .replace(/\n/g, '\$')
                 .replace(/\{\s{0,}([a-zA-Z0-9_]+?)\s{0,}\}/g, "\[$1\]")
                 .replace(/\t}/g, "\    \]")
                 .trim()
                 .powerTrim();

        raw = raw.replace(/\${1,}\{/g, '{')
                 .replace(/\{\${1,}/g, '{')
                 .replace(/\${1,}\}/g, '\$}')
                 .replace(/\}\${1,}/g, '}')
                 .replace(/\$\s/g, '\$')
                 .replace(/else\${1,}/g, 'else')
                 .replace(/\"/g, '\\"')
                 .replace(/^\${1,}/g, '')
                 .replace(/\${1,}$/g, '')
                 .trim();

        $("#formatted").val(raw);
    })
</script>

</html>